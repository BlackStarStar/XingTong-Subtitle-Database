(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[707],{42314:function(N,D,o){"use strict";o.r(D),o.d(D,{default:function(){return Et}});var w=o(75106),Rt=o(54294),nt=o(25255),X=o(34283),Tt=o(71122),U=o(17541),Ot=o(98378),at=o(88851),R=o(54597),T=o(2431),O=o(67857),L=o(17798),Lt=o(91386),f=o(41655),Jt=o(20717),d=o(56227),Mt=o(70032),W=o(35609),Vt=o(98245),K=o(84444),J=o(59301),st=o(70706),G=o(59503),it=o(54348),ot=o(18999),lt=o(89122),ut=o(61230),ct=o(60775),dt=o.n(ct),ht=null;function kt(l,s){{var a=new Set,i=_createForOfIteratorHelper(s.staff),t;try{for(i.s();!(t=i.n()).done;){var r=t.value;if(r!=="F"){var n=_createForOfIteratorHelper(s.skin[r]),u;try{for(n.s();!(u=n.n()).done;){var v=u.value;a.add(v)}}catch(x){n.e(x)}finally{n.f()}}}}catch(x){i.e(x)}finally{i.f()}var h=Array.from(a);if(h.length!==0&&!z(l.skin,h))return!1}var m=_createForOfIteratorHelper(ht),j;try{for(m.s();!(j=m.n()).done;){var g=j.value;if(!z(l[g],s[g]))return!1}}catch(x){m.e(x)}finally{m.f()}if(l.titlestr===""&&l.tagstr===""&&l.typestr===""||s.title.toLowerCase().indexOf(l.titlestr.toLowerCase())!==-1)return!0;{var Z=_createForOfIteratorHelper(s.tags),C;try{for(Z.s();!(C=Z.n()).done;){var S=C.value;if(S.toLowerCase().indexOf(l.tagstr.toLowerCase())!==-1)return!0}}catch(x){Z.e(x)}finally{Z.f()}}{var c=_createForOfIteratorHelper(s.items),p;try{for(c.s();!(p=c.n()).done;){var b=p.value,y=_createForOfIteratorHelper(b.item),I;try{for(y.s();!(I=y.n()).done;){var P=I.value;if(P[0].toLowerCase().indexOf(l.typestr.toLowerCase())!==-1)return!0}}catch(x){y.e(x)}finally{y.f()}}}catch(x){c.e(x)}finally{c.f()}}return!1}function Ht(l){var s=new XMLHttpRequest;s.open("GET",l,!1),s.send(null);var a;try{a=JSON.parse(s.responseText)}catch(i){a={title:"error"}}finally{return a}}function Nt(l,s){var a=new XMLHttpRequest;a.open("POST",l,!1),a.setRequestHeader("Content-Type","application/json");var i=JSON.stringify(s);a.send(i);var t;try{t=JSON.parse(a.responseText)}catch(r){t={title:"error"}}finally{return t}}function ft(l,s){var a=new XMLHttpRequest;a.open("GET",l,!1),a.send(null);var i;a.status!==200&&(a.open("GET",s,!1),a.send(null));try{i=a.responseText}catch(t){throw i="error http",i}finally{return i}}function $(l){for(var s=[],a=l.length-1;a>=0;a--)s.push(l[a]);return s}function z(l,s){return l.length+s.length!==Array.from(new Set([].concat(_toConsumableArray(l),_toConsumableArray(s)))).length}var vt=["https://raw.githubusercontent.com/BlackStarStar/XingTong-Subtitle-Database/main","https://cdn.jsdelivr.net/gh/BlackStarStar/XingTong-Subtitle-Database@latest"],Xt="8001",pt="https://apihk.asdb.live/Api/Subtitle_Search/sub_search",xt=1,M="https://raw-gh.gcdn.mirr.one/BlackStarStar/XingTong-Subtitle-Database/main/db",B="https://raw.githubusercontents.com/BlackStarStar/XingTong-Subtitle-Database/main/db",E={RunOnLocal:xt!==0,sourceUrl:vt[1],queryAPI:pt,MainJsonAPI:B+"/Main_Data.json",MainJsonAPI2:M+"/Main_Data.json",IndexerAPI:B+"/Indexer_Data",SubtitlesAPI:B+"/",SubtitlesAPI2:M+"/",SearchWordsAPI:B+"/Search_Data.json",SearchWordsAPI2:M+"/Search_Data.json"},St=o(96877),mt=o(55790),gt=o.n(mt),Ut=o(53777),e=o(37712),Y=K.Z.Title,Q=K.Z.Text,yt=W.Z.Search;function q(l,s){return l.split(s).length-1;var a,i,t}var jt="yellow";function Zt(l){var s=E.SubtitlesAPI+l+".srt",a=E.SubtitlesAPI2+l+".srt",i="",t=[];i=ft(s,a);for(var r=i.split(`
`),n=0;n<r.length-2;n+=4){var u=r[n]+"|"+r[n+1]+"|"+r[n+2];t.push(u)}return t=[t],t}function _(l,s){fetch(l,{method:"get",responseType:"blob"}).then(function(a){return a.blob()}).then(function(a){var i=document.createElement("a"),t=window.URL.createObjectURL(a);i.href=t,i.download=s,i.click(),i.remove()})}var Dt=[{title:"\u65E5\u671F",width:80,dataIndex:"date"},{title:"\u65F6\u95F4",width:80,dataIndex:"hour"},{title:"BV\u53F7",width:80,dataIndex:"bv",render:function(s){return(0,e.jsx)("a",{href:"https://www.bilibili.com/"+s,target:"_blank",onClick:function(i){i.stopPropagation()},children:s})}},{title:"\u6807\u9898",dataIndex:"title",render:function(s){return(0,e.jsx)(f.Z,{children:(0,e.jsx)(d.Z,{md:12,children:s})})}},{title:"\u5339\u914D\u5173\u952E\u8BCD\u6570",dataIndex:"srtSearch",render:function(s){return(0,e.jsx)(f.Z,{children:(0,e.jsx)(d.Z,{md:12,children:s})})}},{title:"\u4E0B\u8F7D",width:180,render:function(s,a){return(0,e.jsx)(f.Z,{children:(0,e.jsx)(d.Z,{md:12,children:(0,e.jsx)("a",{onClick:function(t,r,n){t.stopPropagation(),_("https://raw-gh.gcdn.mirr.one/BlackStarStar/XingTong-Subtitle-Database/main/db/"+a.bv+".srt",a.title+"_"+a.bv+".srt")},children:(0,e.jsx)(G.Z,{title:"\u4E0B\u8F7D\u5B57\u5E55"})})})})}}],Ct=function(l){(0,O.Z)(a,l);var s=(0,L.Z)(a);function a(i){var t;return(0,R.Z)(this,a),t=s.call(this,i),t.state={input:""},t.handleSearch=function(r){t.props.parent.handleSearch(t.state.input)},t.handleClear=function(r){t.setState({input:""});var n=t.props.parent.props.initDatasrc,u=[];n.map(function(v){v.srtSearch=0,u.push(v)}),t.setState({isModalVisible:!1,currentID:0,dataSource:u}),t.props.parent.setState({dataSource:u,searchWords:"",keyword:"",currentID:0,srtSearch:!0})},t.handleReverse=function(r){t.props.parent.handleReverse()},t}return(0,T.Z)(a,[{key:"render",value:function(){var t=this;return(0,e.jsxs)(at.Z,{onKeyDown:function(n){n.keyCode===13&&t.handleSearch(n)},actions:[(0,e.jsx)(it.Z,{title:"\u9006\u5E8F",onClick:this.handleReverse}),(0,e.jsx)(ot.Z,{title:"\u6E05\u9664\u9009\u62E9",onClick:this.handleClear}),(0,e.jsx)(lt.Z,{title:"\u641C\u7D22",onClick:this.handleSearch})],children:[(0,e.jsx)(f.Z,{children:(0,e.jsx)(d.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(Y,{level:2,children:"\u5B57\u5E55\u5E93\u68C0\u7D22"})})}),(0,e.jsxs)(f.Z,{style:{height:"50px"},children:[(0,e.jsx)(d.Z,{xs:0,md:6}),(0,e.jsx)(d.Z,{xs:24,md:12,align:"middle",children:(0,e.jsx)(W.Z,{style:{borderRadius:"50px"},placeholder:"\u5355\u6761\u5B57\u5E55\u68C0\u7D22\u{1F50D}",onChange:function(n){t.setState({input:n.target.value})},value:this.state.input})}),(0,e.jsx)(d.Z,{md:6,align:"middle"})]})]})}}]),a}(J.Component),bt=function(l){(0,O.Z)(a,l);var s=(0,L.Z)(a);function a(i){var t;return(0,R.Z)(this,a),t=s.call(this,i),t.state={dataSource:t.props.initDatasrc,isModalVisible:!1,displayBV:"",searchWords:"",currentID:0,keyword:"",searchJson:t.props.searchJson,loading:!0,hasLine:0,hasStr:0,srt:{},srtSearch:!0,test:0},t.handleCancel=function(){t.setState({isModalVisible:!1,currentID:0})},t.onSearch=function(r){t.setState({keyword:r.trim()})},t.onSearch1=function(r){var n=r.target.value;n&&n.trim()!==""?t.setState({keyword:n},function(){t.setState({hasLine:t.state.hasLine})}):t.setState({keyword:n})},t.handleSearch=function(r){if(r!=""){r=r.trim(),t.setState({searchWords:r,srtSearch:!1});var n=[],u=0;t.props.initDatasrc.map(function(h){if(t.props.searchJson.hasOwnProperty(h.bv)){if(t.props.searchJson[h.bv].includes(r)){n.push(h);var m=q(t.props.searchJson[h.bv],r);h.srtSearch=m,u+=m}}else console.log(h.bv+"\u7F3A\u5931")}),t.setState({dataSource:n});var v=n.length;U.default.info(v.toString()+"\u6761\u5B57\u5E55\u4E2D\u542B\u6709"+u+"\u4E2A\u5339\u914D\u7ED3\u679C")}else U.default.error("\u8BF7\u8F93\u5165\u641C\u7D22\u5185\u5BB9")},t.scrollTop=function(){var r=document.getElementById("Table-top");r.scrollIntoView({behavior:"auto"})},t.scrollNext=function(r){var n=document.getElementsByClassName(r);if(n.length!==0){var u=t.state.currentID;n[u].scrollIntoView({behavior:"smooth"}),u>=n.length-1?t.setState({currentID:0}):t.setState({currentID:u+1})}},t.scrollPre=function(r){var n=document.getElementsByClassName(r);if(n.length!=0){var u=t.state.currentID;n[u].scrollIntoView({behavior:"smooth"}),u<=0?t.setState({currentID:n.length-1}):t.setState({currentID:u-1})}},t}return(0,T.Z)(a,[{key:"componentDidUpdate",value:function(){var t=this.props,r=t.reRender,n=t.parent,u=t.initDatasrc;r&&(this.setState({dataSource:u}),n.setState({reRender:!1}))}},{key:"handleReverse",value:function(){var t=$(this.state.dataSource);this.setState({dataSource:t})}},{key:"render",value:function(){var t,r=this,n=this.state,u=n.isModalVisible,v=n.displayBV,h=n.searchWords,m=n.loading,j=n.srt,g=n.keyword,Z=n.srtSearch,C=[];return v&&u&&(C=j[v]),(0,e.jsxs)(st.ZP,{children:[(0,e.jsx)(Ct,{parent:this}),(0,e.jsx)(f.Z,{style:{marginTop:"20px"},children:(0,e.jsx)(d.Z,{xs:24,md:24,children:(0,e.jsx)(St.ZP,{columns:[{title:"\u65E5\u671F",width:80,dataIndex:"date"},{title:"\u65F6\u95F4",width:80,dataIndex:"hour"},{title:"BV\u53F7",width:80,dataIndex:"bv",render:function(c){return(0,e.jsx)("a",{href:"https://www.bilibili.com/"+c,target:"_blank",onClick:function(b){b.stopPropagation()},children:c})}},{title:"\u6807\u9898",dataIndex:"title",render:function(c){return(0,e.jsx)(f.Z,{children:(0,e.jsx)(d.Z,{md:12,children:c})})}},(t={title:"\u5339\u914D\u5173\u952E\u8BCD\u6570",dataIndex:"srtSearch",hideInTable:Z,sorter:function(c,p){return c-p},defaultSortOrder:"ascend",sortDirections:["descend","ascend"]},(0,X.Z)(t,"sorter",function(c,p){return c.srtSearch-p.srtSearch}),(0,X.Z)(t,"render",function(c){return(0,e.jsx)(f.Z,{children:(0,e.jsx)(d.Z,{md:12,children:c})})}),t),{title:"\u4E0B\u8F7D",width:180,render:function(c,p){return(0,e.jsx)(f.Z,{children:(0,e.jsx)(d.Z,{md:12,children:(0,e.jsx)("a",{onClick:function(y,I,P){y.stopPropagation(),_("https://raw.githubusercontents.com/BlackStarStar/XingTong-Subtitle-Database/main/db/"+p.bv+".srt",p.title+"_"+p.bv+".srt")},children:(0,e.jsx)(G.Z,{title:"\u4E0B\u8F7D\u5B57\u5E55"})})})})}}],rowKey:"key",dataSource:this.state.dataSource,search:!1,loading:m,onLoad:this.state.loading=!1,toolBarRender:function(){return[(0,e.jsxs)("a",{style:{color:"#fff"},title:"\u4E0B\u8F7D\u5168\u90E8\u5B57\u5E55",href:"https://raw-gh.mirr.one/BlackStarStar/XingTong-Subtitle-Database/main/db/All.zip",download:!0,children:["\u4E0B\u8F7D\u5168\u90E8",(0,e.jsx)(ut.Z,{style:{fontSize:"16px"},title:"\u4E0B\u8F7D\u5168\u90E8\u5B57\u5E55"})]})]},onRow:function(c){return{onClick:function(b){if(r.setState({isModalVisible:!0,displayBV:c.bv,part_time:c.part_time,part_index:c.part_index,title:c.title}),h!=""&&r.setState({keyword:h},function(){r.setState({hasLine:r.state.hasLine})}),!j.hasOwnProperty(c.bv)){var y=j;y[c.bv]=Zt(c.bv),r.setState({srt:y},function(){r.setState({hasLine:r.state.hasLine})})}},style:{cursor:"pointer"}}}})})}),(0,e.jsxs)(nt.Z,{id:"modal",visible:u,maskClosable:!0,onCancel:this.handleCancel,footer:null,destroyOnClose:!0,width:600,loading:!0,children:[(0,e.jsxs)(f.Z,{children:[(0,e.jsx)(d.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(Y,{level:3,children:this.state.title})}),(0,e.jsx)(d.Z,{justify:"center"})]}),(0,e.jsx)(f.Z,{justify:"end",children:(0,e.jsx)(yt,{placeholder:"\u641C\u7D22",allowClear:!0,style:{width:150},onChange:this.onSearch1,value:g,onSearch:this.onSearch})}),(0,e.jsxs)(f.Z,{justify:"end",style:{display:g!==""?"":"none"},xs:2,md:3,children:[this.state.hasLine,"\u53E5\u4E2D\u51FA\u73B0",this.state.hasStr,"\u6B21"]}),(0,e.jsxs)(f.Z,{children:[(0,e.jsx)(d.Z,{xs:3,md:3,children:"\u5E8F\u53F7"}),(0,e.jsx)(d.Z,{xs:10,md:10,children:"\u65F6\u95F4"}),(0,e.jsx)(d.Z,{xs:11,md:11,children:"\u5B57\u5E55"})]}),(0,e.jsxs)(f.Z,{style:{borderBottom:"2px solid"},children:[(0,e.jsx)(Q,{type:"secondary",children:"\u6309\u4E0B\u9F20\u6807\u6EDA\u8F6E\u952E\u5FEB\u901F\u6D4F\u89C8"}),(0,e.jsx)(Q,{type:"secondary",style:{display:v=="BV1aq4y1974i"?"":"none"},children:"     !!!!!\u751F\u65E5\u4F1A\u5B57\u5E55\u8F83\u957F\u8FD8\u672A\u6574\u7406!!!!!"})]}),(0,e.jsx)(f.Z,{children:(0,e.jsx)(d.Z,{span:24,style:{height:"500px",overflowY:"scroll"},children:C.map(function(S,c){var p=[];return r.state.hasLine=0,r.state.hasStr=0,S.map(function(b,y){var I=b.split("|"),P=I[0],x=I[1],V=I[2],tt=!1,k=g.trim();V.includes(k)&&(tt=!0,k&&(r.state.hasLine+=1,r.state.hasStr+=q(V,k)));for(var wt=parseInt(x.split("-->")[0].split(":")[0]),Bt=parseInt(x.split("-->")[0].split(":")[1]),Pt=parseInt(x.split("-->")[0].split(":")[2].split(",")[0]),H=r.state.part_time,At=r.state.part_index,A=wt*3600+60*Bt+Pt,et=0,F=0;F<H.length&&!(A<H[F]);F++)A=A-H[F],et++;var rt="https://www.bilibili.com/"+v+"?p="+At[et]+"&t="+A,Ft="";tt&&p.push((0,e.jsxs)(f.Z,{style:{borderBottom:"1px dashed"},className:Ft,children:[(0,e.jsx)(d.Z,{xs:3,md:3,style:{color:"#B8A6D9"},children:P}),(0,e.jsx)(d.Z,{xs:10,md:10,children:(0,e.jsx)("a",{target:"_blank",href:rt,children:x})}),(0,e.jsx)(d.Z,{xs:11,md:11,style:{color:"#E799B0"},children:(0,e.jsx)(dt(),{highlightStyle:{backgroundColor:jt,padding:0},searchWords:[g.trim()],autoEscape:!0,textToHighlight:V})})]},rt))}),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(f.Z,{children:(0,e.jsx)(d.Z,{style:{color:"#9AC8E2",borderBottom:"1px solid"},id:"Table-top",children:(0,e.jsx)("a",{target:"_blank",href:"https://www.bilibili.com/"+v+"?p="+(c+1),children:"\u5207\u7247"})})}),(0,e.jsx)(gt(),{rows:p})]})})})})]})]})}}]),a}(J.Component),It=function(l){(0,O.Z)(a,l);var s=(0,L.Z)(a);function a(){var i;(0,R.Z)(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return i=s.call.apply(s,[this].concat(r)),i.state={mainJson:[],indexerList:[],reRender:!1},i}return(0,T.Z)(a,[{key:"cancelRerender",value:function(){this.setState({reRender:!1}),console.log("\u5DF2\u53D6\u6D88")}},{key:"componentDidMount",value:function(){var t=this;fetch(E.MainJsonAPI,{cache:"no-cache"}).then(function(r){return r.json().then(function(n){t.setState({mainJson:n.data,reRender:!0})})},function(r){fetch(E.MainJsonAPI2,{cache:"no-cache"}).then(function(n){return n.json().then(function(u){t.setState({mainJson:u.data,reRender:!0})})})}),fetch(E.SearchWordsAPI,{cache:"no-cache"}).then(function(r){return r.json().then(function(n){t.setState({searchJson:n})})},function(r){fetch(E.SearchWordsAPI2,{cache:"no-cache"}).then(function(n){return n.json().then(function(u){t.setState({searchJson:u})})})})}},{key:"render",value:function(){var t=this.state,r=t.mainJson,n=t.reRender,u=t.searchJson,v=[];for(var h in r){var m=void 0,j=void 0,g=void 0,Z=void 0,C=void 0,S=void 0;try{m=r[h].title,j=r[h].bv,g=r[h].date,Z=r[h].time,C=r[h].part_time,S=r[h].part_index}catch(p){console.error("mainJson parse fault for n: "+h)}v.push({key:h,date:g,hour:Z,bv:j,title:m,part_time:C,part_index:S,srtSearch:0})}v=$(v);var c={initColumns:Dt,initDatasrc:v,reRender:n,parent:this,searchJson:u};return(0,e.jsx)(bt,(0,w.Z)({},c))}}]),a}(J.Component),Et=It},46945:function(N){function D(o){var w=new Error("Cannot find module '"+o+"'");throw w.code="MODULE_NOT_FOUND",w}D.keys=function(){return[]},D.resolve=D,D.id=46945,N.exports=D},60465:function(){},32327:function(){},83749:function(){},78016:function(){},29132:function(){},71056:function(){},10336:function(){}}]);

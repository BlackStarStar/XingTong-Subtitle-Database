(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[392],{6760:function(Re,ee,r){"use strict";r.r(ee),r.d(ee,{default:function(){return Me}});var He=r(45328),te=r(99481),ze=r(91386),p=r(41655),_=r(94502),G=r(56243),Je=r(71122),Z=r(17541),K=r(45782),$e=r(98245),b=r(84444),y=r(59301),L=r(70706),c={ffmpeg_api:"http://localhost:4399",Parse_api:"http://localhost:4400",Thread_Num:1,BiliBili_Cookie:"",Multi_Thread_Switch:!0};function oe(){return W.apply(this,arguments)}function W(){return W=(0,G.Z)((0,_.Z)().mark(function i(){var s,n;return(0,_.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne(c.ffmpeg_api+"/ping");case 2:return s=t.sent,t.next=5,ne(c.Parse_api+"/ping");case 5:return n=t.sent,t.abrupt("return",s&&n);case 7:case"end":return t.stop()}},i)})),W.apply(this,arguments)}function ne(i){return Q.apply(this,arguments)}function Q(){return Q=(0,G.Z)((0,_.Z)().mark(function i(s){var n,d,t,o,a,l;return(0,_.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return n=1e3,d=new AbortController,t=d.signal,o=function(f){return new Promise(function(g,h){setTimeout(function(){g(new Response(!1,{status:408})),d.abort()},f)})},a=function(f){return fetch(f,{signal:t})},u.prev=5,u.next=8,Promise.race([o(n),a(s)]);case 8:l=u.sent,u.next=14;break;case 11:return u.prev=11,u.t0=u.catch(5),u.abrupt("return",!1);case 14:return u.abrupt("return",l.ok);case 15:case"end":return u.stop()}},i,null,[[5,11]])})),Q.apply(this,arguments)}function ce(i,s){var n=new Date;n.setTime(n.getTime()+1296e3*1e3),document.cookie=i+"="+s+";expires="+n.toGMTString()+";path=/"}function I(i){if(document.cookie.length>0){var s=document.cookie.indexOf(i+"=");if(s!=-1){s=s+i.length+1;var n=document.cookie.indexOf(";",s);return n==-1&&(n=document.cookie.length),decodeURI(document.cookie.substring(s,n))}}return""}function de(i){fetch("".concat(c.Parse_api,"/Save_BiliBili_Cookie?Cookie=").concat(i)).then(function(s){console.log("b\u7AD9cookie\u8BFB\u53D6\u6210\u529F")},function(s){console.warn("b\u7AD9cookie\u4FDD\u5B58\u5931\u8D25")})}function he(){fetch("".concat(c.Parse_api,"/Get_BiliBili_Cookie")).then(function(i){return i.json()}).then(function(i){i!=""&&(c.BiliBili_Cookie=i)})}function ie(i){i.replace(/ï¼š/g,":");var s=i.split(":");switch(s.length-1){case 0:return parseInt(i);case 1:return parseInt(s[0])*60+parseInt(s[1]);case 2:return parseInt(s[0])*3600+parseInt(s[1])*60+parseInt(s[2])}}var Ge=r(54294),fe=r(25255),Ke=r(94929),pe=r(10817),We=r(98378),U=r(88851),Qe=r(39324),S=r(661),Xe=r(28291),D=r(59067),Ye=r(20717),C=r(56227),qe=r(70032),T=r(35609),R=r(54597),H=r(2431),z=r(67857),J=r(17798),ge=r(68689);function ve(i,s){var n=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!n){if(Array.isArray(i)||(n=(0,ge.Z)(i))||s&&i&&typeof i.length=="number"){n&&(i=n);var d=0,t=function(){};return{s:t,n:function(){return d>=i.length?{done:!0}:{done:!1,value:i[d++]}},e:function(u){throw u},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,a=!1,l;return{s:function(){n=n.call(i)},n:function(){var u=n.next();return o=u.done,u},e:function(u){a=!0,l=u},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(a)throw l}}}}var et=r(3542),me=r(95987),P=r(10973),xe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},je=xe,X=r(23986),re=function(s,n){return y.createElement(X.Z,(0,P.Z)((0,P.Z)({},s),{},{ref:n,icon:je}))};re.displayName="CaretRightOutlined";var Ce=y.forwardRef(re),Fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 176h80v672h-80zm408 0h-64c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8z"}}]},name:"pause",theme:"outlined"},ye=Fe,se=function(s,n){return y.createElement(X.Z,(0,P.Z)((0,P.Z)({},s),{},{ref:n,icon:ye}))};se.displayName="PauseOutlined";var Be=y.forwardRef(se),Ze=r(10569),Ee=r(52767),e=r(37712),ue=b.Z.Text,tt=b.Z.Title,Y,De=function(i){(0,z.Z)(n,i);var s=(0,J.Z)(n);function n(d){var t;return(0,R.Z)(this,n),t=s.call(this,d),t.state={dItems:[]},t}return(0,H.Z)(n,[{key:"get_download_info",value:function(){var t=this;fetch("".concat(c.ffmpeg_api,"/Progress")).then(function(o){o.json().then(function(a){Y=a;var l=[];for(var v in Y){for(var u=Y[v],x=u.Threads,f=u.Save_Name,g=[],h=0;h<x;h++){var E=u[h];g.push({progress:parseInt(E.progress*100),running:E.Running})}l.push({uid:v,thread_num:x,title:f,thread_list:g}),t.setState({dItems:l})}})},function(o){console.error("\u83B7\u53D6\u4E0B\u8F7D\u4FE1\u606F\u5931\u8D25")})}},{key:"update",value:function(){if(!!this.props){var t=this.props.isVisible;t&&(this.get_download_info(),console.log(this.state.dItems))}}},{key:"componentDidMount",value:function(){var t=this;setInterval(function(){t.update()},1e3)}},{key:"render",value:function(){var t=this.props,o=t.isVisible,a=t.onClose,l=this.state.dItems,v=l.map(function(u){return(0,e.jsx)(Te,{uid:u.uid,thread_num:u.thread_num,title:u.title,thread_list:u.thread_list})});return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(me.Z,{placement:"right",visible:o,onClose:a,children:v})})}}]),n}(y.Component);function q(i,s,n){for(var d=0;d<n;d++)fetch("".concat(c.ffmpeg_api,"/thread_operation?Uniq_ID=").concat(i,"&Running=").concat(s,"&Instance_id=").concat(d)).catch(function(t){console.error("\u64CD\u4F5C\u5931\u8D25"),Z.default.error("\u64CD\u4F5C\u5931\u8D25")})}function Se(){fetch("".concat(c.ffmpeg_api,"/Open_Folder")).catch(function(i){console.error("\u6253\u5F00\u6587\u4EF6\u5939\u5931\u8D25"),Z.default.error("\u6253\u5F00\u6587\u4EF6\u5939\u5931\u8D25")})}var Te=function(i){(0,z.Z)(n,i);var s=(0,J.Z)(n);function n(d){var t;return(0,R.Z)(this,n),t=s.call(this,d),t.state={display:"block"},t}return(0,H.Z)(n,[{key:"render",value:function(){var t=this,o=this.props,a=o.uid,l=o.thread_num,v=o.title,u=o.thread_list,x=this.state.display,f=1,g=0,h=ve(u),E;try{for(h.s();!(E=h.n()).done;){var j=E.value;if(j.running===0){f=0;break}else{if(j.running===1)continue;if(j.running===3)g+=1;else if(j.running===4){f=4;break}else break}}}catch(w){h.e(w)}finally{h.f()}if(f===4)return(0,e.jsx)(e.Fragment,{});g>=l&&(f=3);var O=(0,e.jsx)(e.Fragment,{}),F="green",m="active";switch(f){case 0:F="orangered",O=(0,e.jsx)(S.Z,{title:"\u5F00\u59CB",children:(0,e.jsx)(D.Z,{onClick:function(Ue){q(a,1,l)},children:(0,e.jsx)(Ce,{})})}),m="exception";break;case 1:F="orange",O=(0,e.jsx)(S.Z,{title:"\u6682\u505C",children:(0,e.jsx)(D.Z,{onClick:function(Ue){q(a,0,l)},children:(0,e.jsx)(Be,{})})}),m="active";break;case 3:F="green",O=(0,e.jsx)(S.Z,{title:"\u6253\u5F00\u4FDD\u5B58\u6587\u4EF6\u5939",children:(0,e.jsx)(D.Z,{onClick:function(){Se()},children:(0,e.jsx)(Ze.Z,{})})}),m="success";break;case 4:break}var le=100/l,k=le.toString()+"%",Le=u.map(function(w){return(0,e.jsx)(te.Z,{percent:w.progress,style:{width:k},showInfo:!1,status:m})});return(0,e.jsx)(p.Z,{style:{marginTop:"10px",height:"120px",display:x},children:(0,e.jsx)(C.Z,{span:24,style:{height:"100%"},children:(0,e.jsxs)(U.Z,{span:24,style:{borderWidth:"2px",borderColor:F,height:"100%"},children:[(0,e.jsxs)(p.Z,{style:{marginTop:"0px"},children:[(0,e.jsx)(C.Z,{span:16,children:(0,e.jsxs)(ue,{children:["\u6807\u9898: ",v]})}),(0,e.jsx)(C.Z,{offset:2,span:4,children:(0,e.jsxs)(ue,{children:["\u7EBF\u7A0B: ",l]})})]}),(0,e.jsx)(p.Z,{children:Le}),(0,e.jsxs)(p.Z,{style:{marginTop:"5px"},children:[(0,e.jsx)(C.Z,{offset:15,children:(0,e.jsx)(S.Z,{title:"\u5220\u9664\u4EFB\u52A1",children:(0,e.jsx)(D.Z,{onClick:function(){t.setState({display:"none"}),q(a,4,l)},children:(0,e.jsx)(Ee.Z,{})})})}),(0,e.jsx)(C.Z,{offset:1,children:O})]})]})})})}}]),n}(y.Component),Ae=De,be={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 760H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-568H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM216 712H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h72.4v20.5h-35.7c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h35.7V838H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4V716c0-2.2-1.8-4-4-4zM100 188h38v120c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4V152c0-4.4-3.6-8-8-8h-78c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4zm116 240H100c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4h68.4l-70.3 77.7a8.3 8.3 0 00-2.1 5.4V592c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4v-36c0-2.2-1.8-4-4-4h-68.4l70.3-77.7a8.3 8.3 0 002.1-5.4V432c0-2.2-1.8-4-4-4z"}}]},name:"ordered-list",theme:"outlined"},Oe=be,ae=function(s,n){return y.createElement(X.Z,(0,P.Z)((0,P.Z)({},s),{},{ref:n,icon:Oe}))};ae.displayName="OrderedListOutlined";var ke=y.forwardRef(ae),A=b.Z.Text,we=b.Z.Link,V=b.Z.Title,B={UnConnect:0,UnInstall:1,OK:2},_e=function(i){(0,z.Z)(n,i);var s=(0,J.Z)(n);function n(d){var t;return(0,R.Z)(this,n),t=s.call(this,d),t.state={isSettingVisible:!1,ffmpeg_api:c.ffmpeg_api,Parse_api:c.Parse_api,Thread_Num:c.Thread_Num,BiliBili_Cookie:c.BiliBili_Cookie,Multi_Thread_Switch:c.Multi_Thread_Switch,isDListVisible:!1},t.save_setting_param=function(){t.state.Multi_Thread_Switch?c.Thread_Num=t.state.Thread_Num:c.Thread_Num=1,c.ffmpeg_api=t.state.ffmpeg_api,c.Parse_api=t.state.Parse_api,c.BiliBili_Cookie=t.state.BiliBili_Cookie,c.Multi_Thread_Switch=t.state.Multi_Thread_Switch,console.log(c),document.cookie=ce("Config",JSON.stringify(c)),t.state.stat===B.OK&&de(c.BiliBili_Cookie),Z.default.info("\u4FDD\u5B58\u6210\u529F")},t.showSettingModal=function(){t.setState({isSettingVisible:!0})},t.handleSettingSave=function(){t.save_setting_param(),t.setState({isSettingVisible:!1})},t.handleSettingCancel=function(){t.setState({isSettingVisible:!1})},t}return(0,H.Z)(n,[{key:"render",value:function(){var t=this,o=this.props.stat,a=this.state,l=a.isSettingVisible,v=a.ffmpeg_api,u=a.Parse_api,x=a.BiliBili_Cookie,f=a.Multi_Thread_Switch,g=a.Thread_Num,h=a.isDListVisible,E=f?(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(p.Z,{style:{marginTop:24},children:[(0,e.jsx)(V,{level:5,children:"\u7EBF\u7A0B\u6570"}),(0,e.jsx)(T.Z,{defaultValue:g,onChange:function(m){return t.setState({Thread_Num:m.target.value})}}),(0,e.jsx)(A,{type:"secondary",children:"\u9ED8\u8BA44\u7EBF\u7A0B"})]})}):(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(p.Z,{style:{marginTop:24},children:[(0,e.jsx)(V,{level:5,children:"\u7EBF\u7A0B\u6570"}),(0,e.jsx)(T.Z,{value:1,defaultValue:g,disabled:!0}),(0,e.jsx)(A,{type:"secondary",children:"\u9ED8\u8BA44\u7EBF\u7A0B"})]})}),j="";switch(o){case B.UnConnect:j=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{class:"led-box",children:(0,e.jsx)("div",{class:"led-red",style:{height:12,width:12,margin:10}})}),(0,e.jsx)("p",{style:{margin:10},children:"\u672A\u8FDE\u63A5"})]});break;case B.UnInstall:j=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{class:"led-box",children:(0,e.jsx)("div",{class:"led-yellow",style:{height:12,width:12,margin:10}})}),(0,e.jsx)("p",{style:{margin:10},children:"\u4F9D\u8D56\u5B89\u88C5\u4E2D..."})]});break;case B.OK:j=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{class:"led-box",children:(0,e.jsx)("div",{class:"led-green",style:{height:12,width:12,margin:10}})}),(0,e.jsx)("p",{style:{margin:10},children:"\u670D\u52A1\u6B63\u5E38"})]});break;default:break}var O=o===B.UnConnect?"\u5B89\u88C5":"\u8BBE\u7F6E";return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(U.Z,{children:(0,e.jsxs)(p.Z,{children:[(0,e.jsx)("div",{style:{margin:10},children:"\u670D\u52A1\u72B6\u6001:"}),(0,e.jsx)(C.Z,{md:8,xs:12,children:j}),(0,e.jsx)(C.Z,{md:1,offset:11,style:{marginTop:5},children:(0,e.jsx)(S.Z,{title:"\u4E0B\u8F7D\u672C\u5730\u670D\u52A1",children:(0,e.jsx)(D.Z,{onClick:this.showSettingModal,disabled:o===B.UnInstall,children:O})})}),(0,e.jsx)(C.Z,{md:1,offset:1,style:{marginTop:5},children:(0,e.jsx)(S.Z,{title:"\u4E0B\u8F7D\u5217\u8868",children:(0,e.jsx)(D.Z,{onClick:function(m){t.setState({isDListVisible:!0})},children:(0,e.jsx)(ke,{})})})})]})}),(0,e.jsxs)(fe.Z,{visible:l,onOk:this.handleSettingSave,onCancel:this.handleSettingCancel,okText:"\u4FDD\u5B58",cancelText:"\u53D6\u6D88",width:800,children:[(0,e.jsx)(p.Z,{children:(0,e.jsx)(D.Z,{type:"primary",style:{background:"orange",borderColor:"orange"},href:"https://ghproxy.com/https://github.com/A-Soul-Database/RangeDownloader/releases/download/V1.4/app.exe",children:"\u672C\u5730\u670D\u52A1\u4E0B\u8F7D"})}),(0,e.jsx)(p.Z,{children:(0,e.jsx)(A,{type:"secondary",children:"\u7247\u6BB5\u4E0B\u8F7D\u9700\u8981\u4F9D\u6258\u672C\u5730\u7AEF\u53E3\u670D\u52A1,\u82E5\u60A8\u6CA1\u6709\u4E0B\u8F7D,\u53EF\u4EE5\u70B9\u51FB\u4E0A\u65B9\u6309\u94AE\u4E0B\u8F7D,\u5BF9\u4E8EMac/Linux\u7528\u6237\u53EF\u4EE5\u81EA\u884C\u7F16\u8BD1\u6216\u6E90\u7801\u8FD0\u884C"})}),(0,e.jsxs)(p.Z,{style:{marginTop:24},children:[(0,e.jsx)(V,{level:5,children:"\u591A\u7EBF\u7A0B\u52A0\u8F7D"}),(0,e.jsx)(C.Z,{offset:1,children:(0,e.jsx)(pe.Z,{checked:f,onChange:function(m){t.setState({Multi_Thread_Switch:m})},checkedChildren:"\u591A\u7EBF\u7A0B",unCheckedChildren:"\u5355\u7EBF\u7A0B"})}),(0,e.jsxs)(A,{type:"secondary",children:["ffmpeg\u7684\u4E0B\u8F7D\u65B9\u5F0F\u4E0E\u5176\u4ED6\u4E0B\u8F7D\u8F6F\u4EF6\u4E0D\u540C,\u5C5E\u4E8E\u6D41\u5F0F+Seek\u6A21\u5F0F\u52A0\u8F7D.\u4F46\u662F\u7531\u4E8EMp4\u7684\u683C\u5F0F\u539F\u56E0,Stco\u4E0D\u80FD\u901A\u8FC7\u79D2\u6570\u5B8C\u5168\u5206\u5272,",(0,e.jsx)("b",{children:"\u4F1A\u5BFC\u81F4\u5728\u5F00\u59CB\u524D\u51E0\u79D2\u548C\u7EBF\u7A0B\u8FDE\u63A5\u5904\u51FA\u73B0\u82B1\u5C4F\u7B49\u60C5\u51B5"})]}),(0,e.jsx)(A,{type:"secondary",children:"\u5EFA\u8BAE\u5BF9\u4E8E\u5C0F\u65F6\u95F4\u6BB5\u89C6\u9891\u53EF\u4EE5\u4E0D\u7528\u542F\u7528\u8BE5\u529F\u80FD"})]}),E,(0,e.jsxs)(p.Z,{style:{marginTop:24},children:[(0,e.jsx)(V,{level:5,children:"\u672C\u5730ffmpeg\u5730\u5740"}),(0,e.jsx)(T.Z,{defaultValue:v,onChange:function(m){return t.setState({ffmpeg_api:m.target.value})}}),(0,e.jsx)(A,{type:"secondary",children:"\u9ED8\u8BA4http://localhost:4399"})]}),(0,e.jsxs)(p.Z,{style:{marginTop:24},children:[(0,e.jsx)(V,{level:5,children:"\u672C\u5730\u89E3\u6790\u5730\u5740"}),(0,e.jsx)(T.Z,{defaultValue:u,onChange:function(m){return t.setState({Parse_api:m.target.value})}}),(0,e.jsx)(A,{type:"secondary",children:"\u9ED8\u8BA4http://localhost:4400"})]}),(0,e.jsxs)(p.Z,{style:{marginTop:24},children:[(0,e.jsx)(V,{level:5,children:"BiliBili_Cookie"}),(0,e.jsx)(T.Z,{defaultValue:x,onChange:function(m){return t.setState({BiliBili_Cookie:m.target.value})}}),(0,e.jsx)(A,{type:"secondary",children:"\u5982\u679C\u4F60\u662F\u5927\u4F1A\u5458,\u5E76\u4E14\u5E0C\u671B\u4E0B\u8F7D\u66F4\u9AD8\u6E05\u7684\u6E90(\u4F8B\u59824K/1080P\u9AD8\u7801\u7387),\u5219\u9700\u8981\u7ED1\u5B9A\u4F60\u7684B\u7AD9Cookie. \u4F60\u7684Cookie\u5C06\u4F1A\u4FDD\u5B58\u5728\u672C\u5730,Asdb\u4FDD\u8BC1\u4E0D\u4F1A\u4E0A\u4F20\u4EFB\u4F55\u4FE1\u606F.\u5E76\u5F00\u653E\u6E90\u4EE3\u7801\u63A5\u53D7\u76D1\u7763."}),(0,e.jsx)(A,{type:"secondary",children:"Copyright 2022. Asdb.live"})]}),(0,e.jsx)(p.Z,{children:(0,e.jsx)(we,{href:"https://www.bilibili.com/read/cv12349604",target:"_blank",children:"\u70B9\u6B64\u67E5\u770B\u5982\u4F55\u83B7\u53D6BiliBili Cookie"})})]}),(0,e.jsx)(Ae,{isVisible:h,onClose:function(){t.setState({isDListVisible:!1})}})]})}}]),n}(y.Component),$=_e,Ie=r(89122),Pe=r(61230),nt=b.Z.Text,N=b.Z.Title,Ve=function(i){(0,z.Z)(n,i);var s=(0,J.Z)(n);function n(d){var t;return(0,R.Z)(this,n),t=s.call(this,d),t.state={input_url:"",download_url:"",save_name:"",video_title:"",args:"",start_time:"",end_time:"",parse_success:!1},t}return(0,H.Z)(n,[{key:"apply_parse",value:function(){var t=encodeURI(this.state.input_url);t.indexOf("bili-rec.com")&&t.indexOf("/d/")==-1&&(t=t.replace(".com",".com/d")),t.indexOf("xingtong.live")&&t.indexOf("/api/raw")==-1&&(t=t.replace("/zh-CN","/api/raw/?path=")),t.indexOf("bilibili")>0&&Z.default.info("Tips:\u5982\u679C\u4F60\u662F\u5927\u4F1A\u5458,\u53EF\u4EE5\u8BBE\u7F6ECookie\u4EE5\u83B7\u5F974K\u89C6\u9891\u652F\u6301\u634F"),t.indexOf("bilibili")>0&&(t=t.replace("/?p=","?p=")),t.indexOf("bilibili")>0&&t.indexOf("/?spm_id_from")&&(t=t.slice(0,t.indexOf("/?spm_id_from"))),(t.indexOf("bv")==0&&t.length==12||t.indexOf("BV")==0&&t.length==12)&&(t="https://www.bilibili.com/video/"+t);var o=this;fetch("".concat(c.Parse_api,"/Parse"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t})}).then(function(a){a.json().then(function(l){o.setState({download_url:l.Download_Url,video_title:l.Web_Title,args:l.Args,parse_success:l.Download_Url!==""})})},function(a){console.error(a),Z.default.error(a)})}},{key:"get_start_cur_time",value:function(){var t=parseInt(document.getElementsByTagName("video")[0].currentTime);this.setState({start_time:t.toString()})}},{key:"get_end_cur_time",value:function(){var t=parseInt(document.getElementsByTagName("video")[0].currentTime);this.setState({end_time:t.toString()})}},{key:"apply_download",value:function(){var t=this.state,o=t.start_time,a=t.end_time,l=t.download_url,v=t.save_name,u=t.args;if(o===""||a===""){Z.default.error("\u522B\u6025,\u8FD8\u6CA1\u8F93\u5165\u65F6\u95F4\u6BB5");return}var x=ie(o),f=ie(a);if(f<x){Z.default.error("\u7ED3\u675F\u65F6\u95F4\u4E0D\u80FD\u5C0F\u4E8E\u5F00\u59CB\u65F6\u95F4");return}if(x<0||f<0){Z.default.error("\u65F6\u95F4\u4E0D\u80FD\u5C0F\u4E8E0");return}var g;f-x<120?g=1:g=c.Thread_Num,fetch("".concat(c.ffmpeg_api,"/Seek"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Url:l,Start_Time:x,End_Time:f,Save_Name:"".concat(v,"_").concat(x,"_").concat(f),Threads:g,Args:u,Seek_type:"Input"})}).catch(function(h){Z.default.error("\u89C6\u9891\u4E0B\u8F7D\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u8F93\u5165\u683C\u5F0F")}),Z.default.info("\u5DF2\u6DFB\u52A0\u81F3\u4E0B\u8F7D\u961F\u5217\u4E2D")}},{key:"render",value:function(){var t=this,o=this.state,a=o.input_url,l=o.download_url,v=o.start_time,u=o.end_time,x=o.parse_success,f=o.video_title;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(p.Z,{style:{marginTop:10},children:(0,e.jsx)(C.Z,{span:24,align:"middle",children:(0,e.jsxs)(N,{level:2,children:["\u8F93\u5165\u89C6\u9891\u7F51\u5740\u6216\u8005BV\u53F7",(0,e.jsx)(N,{level:5,children:"(\u5F55\u64AD\u7AD9\u4E2D\u7684\u89C6\u9891\u4E5F\u80FD\u89E3\u6790)"})]})})}),(0,e.jsxs)(p.Z,{style:{height:"50px",marginTop:10},children:[(0,e.jsx)(C.Z,{offset:6,span:12,align:"middle",children:(0,e.jsx)(T.Z,{style:{borderRadius:"50px"},placeholder:"E.g. https://www.bilibili.com/video/BV1GZ4y1S7uV",onChange:function(h){t.setState({input_url:decodeURI(h.target.value)})},value:a})}),(0,e.jsx)(C.Z,{offset:1,children:(0,e.jsx)(S.Z,{title:"\u89E3\u6790",children:(0,e.jsx)(D.Z,{type:"primary",onClick:function(h){t.apply_parse()},children:(0,e.jsx)(Ie.Z,{})})})})]}),(0,e.jsxs)(p.Z,{children:[(0,e.jsxs)(C.Z,{md:10,children:[(0,e.jsx)(p.Z,{style:{height:"100px"},children:(0,e.jsx)(U.Z,{style:{width:"100%"},children:(0,e.jsx)(N,{ellipsis:!0,level:4,children:decodeURIComponent(f.toString())})})}),(0,e.jsx)("video",{style:{height:"300px",width:"100%"},title:f,controls:!0,src:l,playsInline:!0})]}),(0,e.jsx)(C.Z,{offset:1,md:12,children:(0,e.jsxs)(U.Z,{style:{height:"400px"},children:[(0,e.jsx)(N,{level:4,children:"\u5F00\u59CB\u65F6\u95F4"}),(0,e.jsxs)(T.Z.Group,{compact:!0,children:[(0,e.jsx)(T.Z,{style:{width:"calc(100% - 200px)"},placeholder:"\u4F8B:00:00:30/00:30/30",onChange:function(h){t.setState({start_time:h.target.value})},value:v}),(0,e.jsx)(S.Z,{title:"\u9009\u53D6\u89C6\u9891\u5F53\u524D\u65F6\u95F4",children:(0,e.jsx)(D.Z,{onClick:function(h){t.get_start_cur_time()},children:"\u5F53\u524D\u65F6\u95F4"})})]}),(0,e.jsx)(N,{level:4,style:{marginTop:"60px"},children:"\u7ED3\u675F\u65F6\u95F4"}),(0,e.jsxs)(T.Z.Group,{compact:!0,children:[(0,e.jsx)(T.Z,{style:{width:"calc(100% - 200px)"},placeholder:"\u4F8B:00:00:30/00:30/30",onChange:function(h){t.setState({end_time:h.target.value})},value:u}),(0,e.jsx)(S.Z,{title:"\u9009\u53D6\u89C6\u9891\u5F53\u524D\u65F6\u95F4",children:(0,e.jsx)(D.Z,{onClick:function(h){t.get_end_cur_time()},children:"\u5F53\u524D\u65F6\u95F4"})})]}),(0,e.jsx)(p.Z,{style:{marginTop:"100px"},children:(0,e.jsx)(C.Z,{span:24,align:"middle",children:(0,e.jsx)(S.Z,{title:x?"\u5C06\u5207\u7247\u65F6\u95F4\u6BB5\u4E0B\u8F7D\u5230\u672C\u5730":"\u522B\u6025\uFF0C\u5148\u89E3\u6790\u89C6\u9891\u634F",children:(0,e.jsxs)(D.Z,{style:{background:"orange",borderColor:"orange"},type:"primary",onClick:function(h){t.apply_download()},disabled:!x,children:["   ",(0,e.jsx)(Pe.Z,{}),"\u4E0B\u8F7D\u5207\u7247"]})})})})]})})]})]})}}]),n}(y.Component),Ne=Ve,M=b.Z.Text,Me=function(){I("Config")&&(c.ffmpeg_api=JSON.parse(I("Config")).ffmpeg_api,c.Parse_api=JSON.parse(I("Config")).Parse_api,c.Thread_Num=JSON.parse(I("Config")).Thread_Num,c.Multi_Thread_Switch=JSON.parse(I("Config")).Multi_Thread_Switch,c.BiliBili_Cookie=JSON.parse(I("Config")).BiliBili_Cookie);var i=(0,y.useState)(1e3),s=(0,K.Z)(i,2),n=s[0],d=s[1],t=(0,y.useState)(B.UnConnect),o=(0,K.Z)(t,2),a=o[0],l=o[1],v=(0,y.useState)(0),u=(0,K.Z)(v,2),x=u[0],f=u[1];function g(){fetch("".concat(c.ffmpeg_api,"/Install_FFmpeg")).catch(function(E){Z.default.error("\u4E0B\u8F7D\u4F9D\u8D56\u5931\u8D25"),l(0)});var h=setInterval(function(){fetch("".concat(c.ffmpeg_api,"/Install_Progress")).then(function(E){E.json().then(function(j){j&&(console.log(j),f(Math.ceil(j.Download_Progress)),j.Install_Stage===2&&(clearInterval(h),l(2)))})},function(E){Z.default.error("\u4E0B\u8F7D\u4F9D\u8D56\u5931\u8D25"),clearInterval(h),l(0)})},1e3)}switch((0,y.useEffect)(function(){function h(){fetch(c.ffmpeg_api+"/Detect").then(function(F){F.json().then(function(m){m===!1?g():l(2),he()})})}function E(){return j.apply(this,arguments)}function j(){return j=(0,G.Z)((0,_.Z)().mark(function F(){var m;return(0,_.Z)().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,oe();case 2:m=k.sent,m?a===B.UnConnect&&(d(5e3),l(B.UnInstall),Z.default.info("\u8FDE\u63A5\u6210\u529F"),h()):(a!==B.UnConnect&&d(1e3),l(B.UnConnect));case 4:case"end":return k.stop()}},F)})),j.apply(this,arguments)}var O=setInterval(function(){E()},n);return function(){return clearInterval(O)}}),a){case B.UnConnect:return(0,e.jsxs)(L.ZP,{children:[(0,e.jsx)($,{stat:a}),(0,e.jsxs)(p.Z,{style:{marginTop:10},children:[(0,e.jsx)(M,{type:"danger",children:"\u672C\u5730\u670D\u52A1\u672A\u6B63\u5E38\u542F\u52A8\u3002\u82E5\u60A8\u672A\u4E0B\u8F7D\u672C\u5730\u670D\u52A1\uFF0C\u8BF7\u70B9\u51FB\u4E0A\u65B9\u201C\u5B89\u88C5\u201D\u6309\u94AE\u8FDB\u884C\u4E0B\u8F7D\u634F"}),(0,e.jsxs)(M,{style:{marginLeft:10},children:["\u63A8\u8350\u4F7F\u7528\u6D4F\u89C8\u5668\u63D2\u4EF6\u5B9E\u73B0\u7C7B\u4F3C\u529F\u80FD",(0,e.jsx)("a",{href:"https://microsoftedge.microsoft.com/addons/detail/asoulvideocut/effcohebnfgnfbgagahbalkdjpgdgeoh",children:"A-SOUL-Video-Cut"})]})]})]});case B.UnInstall:return(0,e.jsxs)(L.ZP,{children:[(0,e.jsx)($,{stat:a}),(0,e.jsx)(p.Z,{style:{marginTop:10},children:(0,e.jsx)(M,{type:"warning",children:"\u672C\u5730\u670D\u52A1\u8FDE\u63A5\u6210\u529F\u3002\u6B63\u5728\u5B89\u88C5\u4F9D\u8D56...(\u7EA680MB)"})}),(0,e.jsx)(p.Z,{children:(0,e.jsx)(te.Z,{percent:x})})]});case B.OK:return(0,e.jsxs)(L.ZP,{children:[(0,e.jsx)($,{stat:a}),(0,e.jsxs)(p.Z,{style:{marginTop:10},children:[(0,e.jsx)(M,{type:"success",children:"\u672C\u5730\u670D\u52A1\u5DF2\u5C31\u7EEA\u3002\u5F00\u59CB\u5207\u7247\u4E0B\u8F7D\u5427"}),(0,e.jsxs)(M,{style:{marginLeft:10},children:["\u63A8\u8350\u4F7F\u7528\u6D4F\u89C8\u5668\u63D2\u4EF6\u5B9E\u73B0\u7C7B\u4F3C\u529F\u80FD",(0,e.jsx)("a",{href:"https://microsoftedge.microsoft.com/addons/detail/asoulvideocut/effcohebnfgnfbgagahbalkdjpgdgeoh",children:"A-SOUL-Video-Cut"})]})]}),(0,e.jsx)(Ne,{})]});default:return(0,e.jsx)(L.ZP,{children:(0,e.jsx)($,{stat:a})})}}}}]);
